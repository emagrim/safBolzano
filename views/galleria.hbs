<head>
    <title>{{ pageTitle }}</title>
    {{{output.std}}}
    <style id="globalStyles"></style>
    {{{output.style}}}
    {{{output.font}}}
    {{{output.fontawesome}}}
    <style>
        :root {
            --margin-section: 40px;
            --grid-gap: 20px;
            --grid-columns_n: 4;
            /*
            calc(100% - ((var(--grid-columns_n) * var(--grid-gap)) + (var(--margin-section)*2)))
            calc(100% - (var(--margin-section)*2));
            */

            --glass-1-border: 1px solid rgba(255, 255, 255, 0.25);
            --glass-1-background: rgba(255, 255, 255, 0.45);
            --glass-1-box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            --glass-1-backdrop-filter: blur(20px);
            --glass-1--webkit-backdrop-filter: blur(20px);
            --glass-1-background_hover: rgba(0, 0, 0, 0.2);
            --glass-1-color_hover: rgba(255, 255, 255, 0.45);
            --glass-1-text: white;
            --bg-section_dark: rgb(33, 36, 39);
        }

        .galleryGrid {
            width: calc(100vw - (var(--margin-section)*2));
            ;
            display: grid;
            grid-gap: var(--grid-gap);
            /*grid-template-columns: repeat(var(--grid-columns_n), 1fr);*/
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            margin: var(--margin-section);
        }

        .galleryDiv {
            position: relative;
        }

        .galleryItem {
            max-width: 100%;
            max-height: 100%;
            height: 100%;
            width: 100%;
            object-fit: cover;

            /*transition: 0.2s ease-out;*/
        }

        .galleryItem:hover {
            opacity: 0.75;

        }

        #modalImage {
            width: auto;
            height: 50%;
            top: 50%;
            left: 50%;
            transform: translate(50%, 50%);
        }

        .modal {
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(35, 35, 35, 0.512);
            backdrop-filter: blur(3px);
            z-index: 100;
        }

        .closeModal {
            font-size: 40px;
            font-weight: bolder;
            color: var(--glass-1-background);
            box-shadow: var(--glass-1-box-shadow);
            backdrop-filter: var(--glass-1-backdrop-filter);
            -webkit-backdrop-filter: var(--glass-1--webkit-backdrop-filter);
            position: absolute;
            right: 70;
            top: 70;
            margin: 10px;
        }

        .closeModal:hover {
            cursor: pointer;
        }

        .toolsModal {
            position: absolute;
            top: 45%;
            right: 70;
            display: flex;
            flex-direction: column;
        }

        .toolsModal * {
            cursor: pointer;
            font-size: 22px;
            color: var(--glass-1-background);
            backdrop-filter: var(--glass-1-backdrop-filter);
            -webkit-backdrop-filter: var(--glass-1--webkit-backdrop-filter);
            box-shadow: var(--glass-1-box-shadow);
        }
        span{
            padding: 10px;
            border-radius: 10px;
            margin: 5px;

            /*background-color: var(--glass-1-background);*/

            animation: slideIn1 1s ease-in-out;
        }

        
    </style>
</head>

<body>
    {{{output.nav}}}
    <div class="slider introduceSection">
        <div class="containsSlides heightSmall">
            {{#each images}}
            <img class="slide imageSlides heightSmall" src="../public/images/gallery/{{this}}">
            <div class="slideOverlay heightSmall">
                <h2></h2>
                <p class="bigText"></p>
                <button class="sliderButtonInfo"></button>
            </div>
            {{/each}}
        </div>
        {{{output.content}}}
        <div class="gallery galleryGrid">
            {{#each images}}
            <img onclick="openImg(event)" class="galleryItem galleryImg" src="../public/images/gallery/{{this}}">
            {{/each}}
        </div>
        <div id="imageModal" class="modal">
            <span class="closeModal" onclick="closeModal()">&times;</span>
            <div class="toolsModal">
                <span class="downloadModal" onclick="downloadImg()"><i class="fa-solid fa-cloud-arrow-down"></i></span>
                <span class="hasFontAwesomeInnit prevImgOfGallery" onclick="prevImgOfGallery()"><i class="fa-solid fa-caret-left"></i></span>
                <span class="hasFontAwesomeInnit nextImgOfGallery" onclick="nextImgOfGallery()"><i class="fa-solid fa-caret-right"></i></span>
            </div>
            <img id="modalImage" class="modal-content">
        </div>
        {{{output.foot}}}
        <script>
            let currentImageIndex = 0;
            const images = document.querySelectorAll('.galleryItem');

            function openImg(event) {
                const clickedImageIndex = Array.from(images).indexOf(event.target);
                seeImg(clickedImageIndex);
            }

            function seeImg(imageIndex) {
                const modal = document.getElementById('imageModal');
                const modalImage = document.getElementById('modalImage');

                currentImageIndex = imageIndex;
                modalImage.src = images[currentImageIndex].src;

                modal.style.display = 'block';
            }

            function closeModal() {
                const modal = document.getElementById('imageModal');
                modal.style.display = 'none';
            }

            function downloadImg() {
                const modalImage = document.getElementById('modalImage');
                const downloadLink = document.createElement('a');
                downloadLink.href = modalImage.src;
                downloadLink.download = 'image.jpg';
                downloadLink.click();
            }

            function prevImgOfGallery() {
                if (currentImageIndex > 0) {
                    currentImageIndex--;
                } else {
                    currentImageIndex = images.length - 1;
                }
                seeImg(currentImageIndex);
            }

            function nextImgOfGallery() {
                if (currentImageIndex < images.length - 1) {
                    currentImageIndex++;
                } else {
                    currentImageIndex = 0;
                }
                seeImg(currentImageIndex);
            }

            document.getElementById('imageModal').addEventListener('click', function (event) {
                if (event.target.id === 'imageModal') {
                    closeModal();
                }
            });
        </script>
</body>